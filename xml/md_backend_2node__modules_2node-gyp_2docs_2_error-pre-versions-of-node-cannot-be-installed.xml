<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.11.0" xml:lang="en-US">
  <compounddef id="md_backend_2node__modules_2node-gyp_2docs_2_error-pre-versions-of-node-cannot-be-installed" kind="page">
    <compoundname>md_backend_2node__modules_2node-gyp_2docs_2_error-pre-versions-of-node-cannot-be-installed</compoundname>
    <title>Error-pre-versions-of-node-cannot-be-installed</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>When using <computeroutput>node-gyp</computeroutput> you might see an error like this when attempting to compile/install a node.js native addon:</para>
<para><programlisting><codeline><highlight class="normal">$<sp/>npm<sp/>install<sp/>bcrypt</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>http<sp/>GET<sp/>https://registry.npmjs.org/bcrypt/0.7.5</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>http<sp/>304<sp/>https://registry.npmjs.org/bcrypt/0.7.5</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>http<sp/>GET<sp/>https://registry.npmjs.org/bindings/1.0.0</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>http<sp/>304<sp/>https://registry.npmjs.org/bindings/1.0.0</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">&gt;<sp/>bcrypt@0.7.5<sp/>install<sp/>/home/ubuntu/public/song-swap/node_modules/bcrypt</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/>node-gyp<sp/>rebuild</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>configure<sp/>error</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/>Error:<sp/>&quot;pre&quot;<sp/>versions<sp/>of<sp/>node<sp/>cannot<sp/>be<sp/>installed,<sp/>use<sp/>the<sp/>--nodedir<sp/>flag<sp/>instead</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>install<sp/>(/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/install.js:69:16)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>Object.self.commands.(anonymous<sp/>function)<sp/>[as<sp/>install]<sp/>(/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/node-gyp.js:56:37)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>getNodeDir<sp/>(/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:219:20)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:105:9</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>ChildProcess.exithandler<sp/>(child_process.js:630:7)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>ChildProcess.EventEmitter.emit<sp/>(events.js:99:17)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>maybeClose<sp/>(child_process.js:730:16)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>stack<sp/><sp/><sp/><sp/><sp/>at<sp/>Process.ChildProcess._handle.onexit<sp/>(child_process.js:797:5)</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>System<sp/>Linux<sp/>3.5.0-21-generic</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>command<sp/>&quot;node&quot;<sp/>&quot;/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&quot;<sp/>&quot;rebuild&quot;</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>cwd<sp/>/home/ubuntu/public/song-swap/node_modules/bcrypt</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>node<sp/>-v<sp/>v0.11.2-pre</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>node-gyp<sp/>-v<sp/>v0.9.5</highlight></codeline>
<codeline><highlight class="normal">gyp<sp/>ERR!<sp/>not<sp/>ok</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>bcrypt@0.7.5<sp/>install:<sp/>`node-gyp<sp/>rebuild`</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>`sh<sp/>&quot;-c&quot;<sp/>&quot;node-gyp<sp/>rebuild&quot;`<sp/>failed<sp/>with<sp/>1</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>Failed<sp/>at<sp/>the<sp/>bcrypt@0.7.5<sp/>install<sp/>script.</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>This<sp/>is<sp/>most<sp/>likely<sp/>a<sp/>problem<sp/>with<sp/>the<sp/>bcrypt<sp/>package,</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>not<sp/>with<sp/>npm<sp/>itself.</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>Tell<sp/>the<sp/>author<sp/>that<sp/>this<sp/>fails<sp/>on<sp/>your<sp/>system:</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/><sp/><sp/><sp/><sp/>node-gyp<sp/>rebuild</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>You<sp/>can<sp/>get<sp/>their<sp/>info<sp/>via:</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/><sp/><sp/><sp/><sp/>npm<sp/>owner<sp/>ls<sp/>bcrypt</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>There<sp/>is<sp/>likely<sp/>additional<sp/>logging<sp/>output<sp/>above.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>System<sp/>Linux<sp/>3.5.0-21-generic</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>command<sp/>&quot;/usr/local/bin/node&quot;<sp/>&quot;/usr/local/bin/npm&quot;<sp/>&quot;install&quot;<sp/>&quot;bcrypt&quot;</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>cwd<sp/>/home/ubuntu/public/song-swap</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>node<sp/>-v<sp/>v0.11.2-pre</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>npm<sp/>-v<sp/>1.2.18</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>code<sp/>ELIFECYCLE</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>Additional<sp/>logging<sp/>details<sp/>can<sp/>be<sp/>found<sp/>in:</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/><sp/><sp/><sp/><sp/>/home/ubuntu/public/song-swap/npm-debug.log</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>ERR!<sp/>not<sp/>ok<sp/>code<sp/>0</highlight></codeline>
</programlisting></para>
<para>The main error here is:</para>
<para><programlisting><codeline><highlight class="normal">Error:<sp/>&quot;pre&quot;<sp/>versions<sp/>of<sp/>node<sp/>cannot<sp/>be<sp/>installed,<sp/>use<sp/>the<sp/>--nodedir<sp/>flag<sp/>instead</highlight></codeline>
</programlisting></para>
<para>This error is caused when you attempt to compile a native addon using a version of node.js with <computeroutput>-pre</computeroutput> at the end of the version number:</para>
<para><programlisting><codeline><highlight class="normal"><sp/>bash</highlight></codeline>
<codeline><highlight class="normal">$<sp/>node<sp/>-v</highlight></codeline>
<codeline><highlight class="normal">v0.10.4-pre</highlight></codeline>
</programlisting></para>
<sect2 id="md_backend_2node__modules_2node-gyp_2docs_2_error-pre-versions-of-node-cannot-be-installed_1autotoc_md2394">
<title>How to avoid (the short answer)</title><para>To avoid this error completely just use a stable release of node.js. i.e. <computeroutput>v0.10.4</computeroutput>, and <bold>not</bold> <computeroutput>v0.10.4-pre</computeroutput>.</para>
</sect2>
<sect2 id="md_backend_2node__modules_2node-gyp_2docs_2_error-pre-versions-of-node-cannot-be-installed_1autotoc_md2395">
<title>How to fix (the long answer)</title><para>This error happens because <computeroutput>node-gyp</computeroutput> does not know what header files were used to compile your &quot;pre&quot; version of node, and therefore it needs you to specify the node source code directory path using the <computeroutput>--nodedir</computeroutput> flag.</para>
<para>For example, if I compiled my development (&quot;pre&quot;) version of node.js using the source code in <computeroutput>/Users/nrajlich/node</computeroutput>, then I could invoke <computeroutput>node-gyp</computeroutput> like:</para>
<para><programlisting><codeline><highlight class="normal"><sp/>bash</highlight></codeline>
<codeline><highlight class="normal">$<sp/>node-gyp<sp/>rebuild<sp/>--nodedir=/Users/nrajlich/node</highlight></codeline>
</programlisting></para>
<para>Or install an native addon through <computeroutput>npm</computeroutput> like:</para>
<para><programlisting><codeline><highlight class="normal"><sp/>bash</highlight></codeline>
<codeline><highlight class="normal">$<sp/>npm<sp/>install<sp/>bcrypt<sp/>--nodedir=/Users/nrajlich/node</highlight></codeline>
</programlisting></para>
<sect3 id="md_backend_2node__modules_2node-gyp_2docs_2_error-pre-versions-of-node-cannot-be-installed_1autotoc_md2396">
<title>Always use <computeroutput>--nodedir</computeroutput></title><para><bold>Note:</bold> This is for advanced users who use <computeroutput>-pre</computeroutput> versions of node more often than tagged releases.</para>
<para>If you&apos;re invoking <computeroutput>node-gyp</computeroutput> through <computeroutput>npm</computeroutput>, then you can leverage <computeroutput>npm</computeroutput>&apos;s configuration system and not have to specify the <computeroutput>--nodedir</computeroutput> flag all the time:</para>
<para><programlisting><codeline><highlight class="normal"><sp/>bash</highlight></codeline>
<codeline><highlight class="normal">$<sp/>npm<sp/>config<sp/>set<sp/>nodedir<sp/>/Users/nrajlich/node</highlight></codeline>
</programlisting> </para>
</sect3>
</sect2>
    </detaileddescription>
    <location file="backend/node_modules/node-gyp/docs/Error-pre-versions-of-node-cannot-be-installed.md"/>
  </compounddef>
</doxygen>

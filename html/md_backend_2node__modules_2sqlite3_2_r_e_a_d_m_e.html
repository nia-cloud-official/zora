<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: ⚙️ node-sqlite3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_backend_2node__modules_2sqlite3_2_r_e_a_d_m_e.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">⚙️ node-sqlite3</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3601"></a> Asynchronous, non-blocking <a href="https://sqlite.org/">SQLite3</a> bindings for <a href="http://nodejs.org/">Node.js</a>.</p>
<p><a href="https://www.npmjs.com/package/sqlite3"><img src="https://img.shields.io/github/release/TryGhost/node-sqlite3.svg" alt="Latest release" style="pointer-events: none;" class="inline"/></a> <img src="https://github.com/TryGhost/node-sqlite3/workflows/CI/badge.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/> <a href="https://app.fossa.io/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fmapbox%2Fnode-sqlite3?ref=badge_shield"><img src="https://app.fossa.io/api/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fmapbox%2Fnode-sqlite3.svg?type=shield" alt="FOSSA Status" style="pointer-events: none;" class="inline"/></a> <a href="https://nodejs.org/dist/latest/docs/api/n-api.html#n_api_n_api"><img src="https://img.shields.io/badge/N--API-v3-green.svg" alt="N-API v3 Badge" style="pointer-events: none;" class="inline"/></a> <a href="https://nodejs.org/dist/latest/docs/api/n-api.html#n_api_n_api"><img src="https://img.shields.io/badge/N--API-v6-green.svg" alt="N-API v6 Badge" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md3602"></a>
Features</h1>
<ul>
<li>Straightforward query and parameter binding interface</li>
<li>Full Buffer/Blob support</li>
<li>Extensive <a href="https://github.com/tryghost/node-sqlite3/wiki/Debugging">debugging support</a></li>
<li><a href="https://github.com/tryghost/node-sqlite3/wiki/Control-Flow">Query serialization</a> API</li>
<li><a href="https://github.com/TryGhost/node-sqlite3/wiki/API#databaseloadextensionpath-callback">Extension support</a>, including bundled support for the <a href="https://www.sqlite.org/json1.html">json1 extension</a></li>
<li>Big test suite</li>
<li>Written in modern C++ and tested for memory leaks</li>
<li>Bundles SQLite v3.44.2, or you can build using a local SQLite</li>
</ul>
<h1><a class="anchor" id="autotoc_md3603"></a>
Installing</h1>
<p>You can use <a href="https://github.com/npm/cli"><code>npm</code></a> or <a href="https://github.com/yarnpkg/yarn"><code>yarn</code></a> to install <code>sqlite3</code>:</p>
<ul>
<li>(recommended) Latest published package: <div class="fragment"><div class="line">npm install sqlite3</div>
<div class="line"># or</div>
<div class="line">yarn add sqlite3</div>
</div><!-- fragment --></li>
<li>GitHub's <code>master</code> branch: <code>npm install <a href="https://github.com/tryghost/node-sqlite3/tarball/master">https://github.com/tryghost/node-sqlite3/tarball/master</a></code></li>
</ul>
<h3><a class="anchor" id="autotoc_md3604"></a>
Prebuilt binaries</h3>
<p><code>sqlite3</code> v5+ was rewritten to use <a href="https://nodejs.org/api/n-api.html">Node-API</a> so prebuilt binaries do not need to be built for specific Node versions. <code>sqlite3</code> currently builds for both Node-API v3 and v6. Check the <a href="https://nodejs.org/api/n-api.html#node-api-version-matrix">Node-API version matrix</a> to ensure your Node version supports one of these. The prebuilt binaries should be supported on Node v10+.</p>
<p>The module uses <a href="https://github.com/prebuild/prebuild-install"><code>prebuild-install</code></a> to download the prebuilt binary for your platform, if it exists. These binaries are hosted on GitHub Releases for <code>sqlite3</code> versions above 5.0.2, and they are hosted on S3 otherwise. The following targets are currently provided:</p>
<ul>
<li><code>darwin-arm64</code></li>
<li><code>darwin-x64</code></li>
<li><code>linux-arm64</code></li>
<li><code>linux-x64</code></li>
<li><code>linuxmusl-arm64</code></li>
<li><code>linuxmusl-x64</code></li>
<li><code>win32-ia32</code></li>
<li><code>win32-x64</code></li>
</ul>
<p>Unfortunately, <a href="https://github.com/prebuild/prebuild/issues/174">prebuild</a> cannot differentiate between <code>armv6</code> and <code>armv7</code>, and instead uses <code>arm</code> as the <code>{arch}</code>. Until that is fixed, you will still need to install <code>sqlite3</code> from source.</p>
<p>Support for other platforms and architectures may be added in the future if CI supports building on them.</p>
<p>If your environment isn't supported, it'll use <code>node-gyp</code> to build SQLite, but you will need to install a C++ compiler and linker.</p>
<h3><a class="anchor" id="autotoc_md3605"></a>
Other ways to install</h3>
<p>It is also possible to make your own build of <code>sqlite3</code> from its source instead of its npm package (See below.).</p>
<p>The <code>sqlite3</code> module also works with <a href="https://github.com/rogerwang/node-webkit">node-webkit</a> if node-webkit contains a supported version of Node.js engine. (See below.)</p>
<p>SQLite's <a href="https://github.com/sqlcipher/sqlcipher">SQLCipher extension</a> is also supported. (See below.)</p>
<h1><a class="anchor" id="autotoc_md3606"></a>
API</h1>
<p>See the <a href="https://github.com/TryGhost/node-sqlite3/wiki/API">API documentation</a> in the wiki.</p>
<h1><a class="anchor" id="autotoc_md3607"></a>
Usage</h1>
<p><b>Note:</b> the module must be installed before use.</p>
<div class="fragment"><div class="line"> js</div>
<div class="line">const sqlite3 = require(&#39;sqlite3&#39;).verbose();</div>
<div class="line">const db = new sqlite3.Database(&#39;:memory:&#39;);</div>
<div class="line"> </div>
<div class="line">db.serialize(() =&gt; {</div>
<div class="line">    db.run(&quot;CREATE TABLE lorem (info TEXT)&quot;);</div>
<div class="line"> </div>
<div class="line">    const stmt = db.prepare(&quot;INSERT INTO lorem VALUES (?)&quot;);</div>
<div class="line">    for (let i = 0; i &lt; 10; i++) {</div>
<div class="line">        stmt.run(&quot;Ipsum &quot; + i);</div>
<div class="line">    }</div>
<div class="line">    stmt.finalize();</div>
<div class="line"> </div>
<div class="line">    db.each(&quot;SELECT rowid AS id, info FROM lorem&quot;, (err, row) =&gt; {</div>
<div class="line">        console.log(row.id + &quot;: &quot; + row.info);</div>
<div class="line">    });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">db.close();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3608"></a>
Source install</h2>
<p>To skip searching for pre-compiled binaries, and force a build from source, use</p>
<div class="fragment"><div class="line">npm install --build-from-source</div>
</div><!-- fragment --><p>The sqlite3 module depends only on libsqlite3. However, by default, an internal/bundled copy of sqlite will be built and statically linked, so an externally installed sqlite3 is not required.</p>
<p>If you wish to install against an external sqlite then you need to pass the <code>--sqlite</code> argument to <code>npm</code> wrapper:</p>
<div class="fragment"><div class="line">npm install --build-from-source --sqlite=/usr/local</div>
</div><!-- fragment --><p>If building against an external sqlite3 make sure to have the development headers available. Mac OS X ships with these by default. If you don't have them installed, install the <code>-dev</code> package with your package manager, e.g. <code>apt-get install libsqlite3-dev</code> for Debian/Ubuntu. Make sure that you have at least <code>libsqlite3</code> &gt;= 3.6.</p>
<p>Note, if building against homebrew-installed sqlite on OS X you can do:</p>
<div class="fragment"><div class="line">npm install --build-from-source --sqlite=/usr/local/opt/sqlite/</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3609"></a>
Custom file header (magic)</h2>
<p>The default sqlite file header is "SQLite format 3". You can specify a different magic, though this will make standard tools and libraries unable to work with your files.</p>
<div class="fragment"><div class="line">npm install --build-from-source --sqlite_magic=&quot;MyCustomMagic15&quot;</div>
</div><!-- fragment --><p>Note that the magic <em>must</em> be exactly 15 characters long (16 bytes including null terminator).</p>
<h2><a class="anchor" id="autotoc_md3610"></a>
Building for node-webkit</h2>
<p>Because of ABI differences, <code>sqlite3</code> must be built in a custom to be used with <a href="https://github.com/rogerwang/node-webkit">node-webkit</a>.</p>
<p>To build <code>sqlite3</code> for node-webkit:</p>
<ol type="1">
<li>Install <a href="https://github.com/rogerwang/nw-gyp"><code>nw-gyp</code></a> globally: <code>npm install nw-gyp -g</code> *(unless already installed)*</li>
<li>Build the module with the custom flags of <code>--runtime</code>, <code>--target_arch</code>, and <code>--target</code>:</li>
</ol>
<div class="fragment"><div class="line">NODE_WEBKIT_VERSION=&quot;0.8.6&quot; # see latest version at https://github.com/rogerwang/node-webkit#downloads</div>
<div class="line">npm install sqlite3 --build-from-source --runtime=node-webkit --target_arch=ia32 --target=$(NODE_WEBKIT_VERSION)</div>
</div><!-- fragment --><p>You can also run this command from within a <code>sqlite3</code> checkout:</p>
<div class="fragment"><div class="line">npm install --build-from-source --runtime=node-webkit --target_arch=ia32 --target=$(NODE_WEBKIT_VERSION)</div>
</div><!-- fragment --><p>Remember the following:</p>
<ul>
<li>You must provide the right <code>--target_arch</code> flag. <code>ia32</code> is needed to target 32bit node-webkit builds, while <code>x64</code> will target 64bit node-webkit builds (if available for your platform).</li>
<li>After the <code>sqlite3</code> package is built for node-webkit it cannot run in the vanilla Node.js (and vice versa).<ul>
<li>For example, <code>npm test</code> of the node-webkit's package would fail.</li>
</ul>
</li>
</ul>
<p>Visit the “<a href="https://github.com/rogerwang/node-webkit/wiki/Using-Node-modules">Using Node modules</a>” article in the node-webkit's wiki for more details.</p>
<h2><a class="anchor" id="autotoc_md3611"></a>
Building for SQLCipher</h2>
<p>For instructions on building SQLCipher, see <a href="https://coolaj86.com/articles/building-sqlcipher-for-node-js-on-raspberry-pi-2/">Building SQLCipher for Node.js</a>. Alternatively, you can install it with your local package manager.</p>
<p>To run against SQLCipher, you need to compile <code>sqlite3</code> from source by passing build options like:</p>
<div class="fragment"><div class="line">npm install sqlite3 --build-from-source --sqlite_libname=sqlcipher --sqlite=/usr/</div>
<div class="line"> </div>
<div class="line">node -e &#39;require(&quot;sqlite3&quot;)&#39;</div>
</div><!-- fragment --><p>If your SQLCipher is installed in a custom location (if you compiled and installed it yourself), you'll need to set some environment variables:</p>
<h3><a class="anchor" id="autotoc_md3612"></a>
On OS X with Homebrew</h3>
<p>Set the location where <code>brew</code> installed it:</p>
<div class="fragment"><div class="line">export LDFLAGS=&quot;-L`brew --prefix`/opt/sqlcipher/lib&quot;</div>
<div class="line">export CPPFLAGS=&quot;-I`brew --prefix`/opt/sqlcipher/include/sqlcipher&quot;</div>
<div class="line">npm install sqlite3 --build-from-source --sqlite_libname=sqlcipher --sqlite=`brew --prefix`</div>
<div class="line"> </div>
<div class="line">node -e &#39;require(&quot;sqlite3&quot;)&#39;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3613"></a>
On most Linuxes (including Raspberry Pi)</h3>
<p>Set the location where <code>make</code> installed it:</p>
<div class="fragment"><div class="line">export LDFLAGS=&quot;-L/usr/local/lib&quot;</div>
<div class="line">export CPPFLAGS=&quot;-I/usr/local/include -I/usr/local/include/sqlcipher&quot;</div>
<div class="line">export CXXFLAGS=&quot;$CPPFLAGS&quot;</div>
<div class="line">npm install sqlite3 --build-from-source --sqlite_libname=sqlcipher --sqlite=/usr/local --verbose</div>
<div class="line"> </div>
<div class="line">node -e &#39;require(&quot;sqlite3&quot;)&#39;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3614"></a>
Custom builds and Electron</h3>
<p>Running <code>sqlite3</code> through <a href="https://github.com/electron/electron-rebuild">electron-rebuild</a> does not preserve the SQLCipher extension, so some additional flags are needed to make this build Electron compatible. Your <code>npm install sqlite3 --build-from-source</code> command needs these additional flags (be sure to replace the target version with the current Electron version you are working with):</p>
<div class="fragment"><div class="line">--runtime=electron --target=18.2.1 --dist-url=https://electronjs.org/headers</div>
</div><!-- fragment --><p>In the case of MacOS with Homebrew, the command should look like the following:</p>
<div class="fragment"><div class="line">npm install sqlite3 --build-from-source --sqlite_libname=sqlcipher --sqlite=`brew --prefix` --runtime=electron --target=18.2.1 --dist-url=https://electronjs.org/headers</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3615"></a>
Testing</h1>
<div class="fragment"><div class="line">npm test</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3616"></a>
Contributors</h1>
<ul>
<li><a href="https://github.com/daniellockyer">Daniel Lockyer</a></li>
<li><a href="https://github.com/kkaefer">Konstantin Käfer</a></li>
<li><a href="https://github.com/springmeyer">Dane Springmeyer</a></li>
<li><a href="https://github.com/willwhite">Will White</a></li>
<li><a href="https://github.com/orlandov">Orlando Vazquez</a></li>
<li><a href="https://github.com/artiz">Artem Kustikov</a></li>
<li><a href="https://github.com/grumdrig">Eric Fredricksen</a></li>
<li><a href="https://github.com/mrjjwright">John Wright</a></li>
<li><a href="https://github.com/ry">Ryan Dahl</a></li>
<li><a href="https://github.com/tmcw">Tom MacWright</a></li>
<li><a href="https://github.com/carter-thaxton">Carter Thaxton</a></li>
<li><a href="https://github.com/audriusk">Audrius Kažukauskas</a></li>
<li><a href="https://github.com/pyneo">Johannes Schauer</a></li>
<li><a href="https://github.com/Mithgol">Mithgol</a></li>
<li><a href="https://github.com/kewde">Kewde</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md3617"></a>
Acknowledgments</h1>
<p>Thanks to <a href="https://github.com/orlandov">Orlando Vazquez</a>, <a href="https://github.com/grumdrig">Eric Fredricksen</a> and <a href="https://github.com/ry">Ryan Dahl</a> for their SQLite bindings for node, and to mraleph on Freenode's #v8 for answering questions.</p>
<p>This module was originally created by <a href="https://mapbox.com/">Mapbox</a> &amp; is now maintained by <a href="https://ghost.org">Ghost</a>.</p>
<h1><a class="anchor" id="autotoc_md3618"></a>
Changelog</h1>
<p>We use <a href="https://github.com/TryGhost/node-sqlite3/releases">GitHub releases</a> for notes on the latest versions. See <a href="https://github.com/TryGhost/node-sqlite3/blob/b05f4594cf8b0de64743561fcd2cfe6f4571754d/CHANGELOG.md">CHANGELOG.md</a> in git history for details on older versions.</p>
<h1><a class="anchor" id="autotoc_md3619"></a>
License</h1>
<p><code>node-sqlite3</code> is <a href="https://github.com/tryghost/node-sqlite3/raw/master/LICENSE">BSD licensed</a>.</p>
<p><a href="https://app.fossa.io/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fmapbox%2Fnode-sqlite3?ref=badge_large"><img src="https://app.fossa.io/api/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fmapbox%2Fnode-sqlite3.svg?type=large" alt="FOSSA Status" style="pointer-events: none;" class="inline"/></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
